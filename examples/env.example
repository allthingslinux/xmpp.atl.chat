# ============================================================================
# PROFESSIONAL PROSODY XMPP SERVER
# Essential Environment Variables
# ============================================================================
# Copy this file to .env and customize for your deployment

# ============================================================================
# DOMAIN CONFIGURATION (REQUIRED)
# ============================================================================

# Your XMPP domain (REQUIRED - change this!)
PROSODY_DOMAIN=yourdomain.com

# Administrator JIDs (comma-separated)
PROSODY_ADMINS=admin@yourdomain.com

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# Database credentials (REQUIRED for production)
PROSODY_DB_NAME=prosody
PROSODY_DB_USER=prosody
PROSODY_DB_PASSWORD=ChangeMe123!

# ============================================================================
# PORT CONFIGURATION (Optional - defaults are usually fine)
# ============================================================================

# XMPP ports
PROSODY_C2S_PORT=5222              # Client connections (STARTTLS)
PROSODY_S2S_PORT=5269              # Server-to-server
PROSODY_C2S_DIRECT_TLS_PORT=5223   # Client connections (Direct TLS)
PROSODY_S2S_DIRECT_TLS_PORT=5270   # Server-to-server (Direct TLS)

# Web services ports
PROSODY_HTTP_PORT=5280             # HTTP (BOSH/WebSocket/Admin)
PROSODY_HTTPS_PORT=5281            # HTTPS (BOSH/WebSocket/Admin)

# ============================================================================
# OPTIONAL SETTINGS
# ============================================================================

# Registration (set to true only if you want open registration)
PROSODY_ALLOW_REGISTRATION=false

# Logging level (debug, info, warn, error)
PROSODY_LOG_LEVEL=info

# File upload size limit in bytes (default: ~50MB)
PROSODY_UPLOAD_SIZE_LIMIT=50485760

# ============================================================================
# SECURITY CREDENTIALS (Optional - for enhanced features)
# ============================================================================

# LDAP integration (if using enterprise directory)
# PROSODY_LDAP_PASSWORD=your_ldap_password

# OAuth integration (if using external authentication)
# PROSODY_OAUTH_CLIENT_SECRET=your_oauth_secret

# TURN/STUN server secret (for voice/video calls)
TURN_SECRET=ChangeMe123!

# ============================================================================
# TURN/STUN SERVER CONFIGURATION (for voice/video calls)
# ============================================================================

# TURN server ports
TURN_PORT=3478                     # STUN/TURN port
TURNS_PORT=5349                    # TURN over TLS port
TURN_MIN_PORT=49152                # RTP relay port range start
TURN_MAX_PORT=65535                # RTP relay port range end

# TURN server authentication
TURN_USERNAME=prosody
TURN_PASSWORD=ChangeMe123!

# ============================================================================
# MONITORING CONFIGURATION
# ============================================================================

# Monitoring service ports
PROMETHEUS_PORT=9090               # Prometheus metrics
GRAFANA_PORT=3000                  # Grafana dashboards
NODE_EXPORTER_PORT=9100            # System metrics

# Grafana admin password
GRAFANA_ADMIN_PASSWORD=ChangeMe123!

# ============================================================================
# WEB ACCESS URLS (with default ports)
# ============================================================================

# XMPP Services:
# - Admin Panel: https://yourdomain.com:5281/admin
# - File Upload: https://yourdomain.com:5281/upload
# - WebSocket: wss://yourdomain.com:5281/xmpp-websocket
# - BOSH: https://yourdomain.com:5281/http-bind

# Monitoring Services:
# - Prometheus: http://localhost:9090
# - Grafana: http://localhost:3000
# - Node Exporter: http://localhost:9100

# TURN/STUN Services:
# - STUN: yourdomain.com:3478
# - TURN: yourdomain.com:3478
# - TURNS (TLS): yourdomain.com:5349

# For standard ports (80/443), set:
# PROSODY_HTTP_PORT=80
# PROSODY_HTTPS_PORT=443
# Then access without port numbers in URLs

# ============================================================================
# DEPLOYMENT MODES
# ============================================================================

# Minimal deployment (XMPP + Database only):
# docker-compose up -d prosody db

# Full deployment (all services):
# docker-compose up -d

# Custom service selection:
# docker-compose up -d prosody db grafana prometheus 